<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jeecg.modules.pd.mapper.PdProductMapper">

    <select id="chooseProductList" parameterType="org.jeecg.modules.pd.vo.PdProductPage">
        select
            a.id as productId,
            a.name as productName,
            a.unit_id as unitId,
            a.vender_id as venderId,
            a.supplier_id as supplierId,
            a.spec as spec,
            a.version as version,
            b.name as unitName,
            c.name as venderName,
            d.name as supplierName
        from pd_product a
        left join pd_unit b on a.unit_id = b.id
        left join pd_vender c on a.vender_id = c.id
        left join pd_supplier d on a.supplier_id = d.id
        <where>
            a.del_flag = #{DEL_FLAG_NORMAL}
            <if test="name != null and name != ''">
                AND (
                    a.number LIKE concat('%',#{name},'%')
                    or a.name LIKE concat('%',#{name},'%')
                    or a.py LIKE concat('%',#{name},'%')
                    or a.wb LIKE concat('%',#{name},'%')
                    or a.bname LIKE concat('%',#{name},'%')
                    or a.bpy LIKE concat('%',#{name},'%')
                    or a.bwb LIKE concat('%',#{name},'%')
                    or a.zdy LIKE concat('%',#{name},'%')
                )
            </if>
            <if test="id != null and id != ''">
                AND a.id = #{name}
            </if>
            <if test="supplierId != null and supplierId != ''">
                AND a.supplier_id = #{supplierId}
            </if>
            <if test="venderId != null and venderId != ''">
                AND a.vender_id = #{venderId}
            </if>
        </where>
        ORDER BY a.update_time desc
    </select>
</mapper>